<!-- ==========================================
     CULTURA Y AMBIENTE (Glass/Cian ¬∑ 3 pilares + chips)
     + Part√≠culas ‚Äúbailando‚Äù por toda la secci√≥n (Canvas)
     ========================================== -->

<section id="cultura" class="sn-cultureBalanced v6" aria-labelledby="cultura-title">
  <canvas id="culturaParticles" class="sn-particles-canvas" aria-hidden="true"></canvas>

  <div class="sn-container">
    <header class="intro" aria-labelledby="cultura-title">
      <span class="kicker" aria-hidden="true">Nuestro ADN</span>
      <h2 id="cultura-title" class="sn-h2">Cultura y ambiente</h2>
      <p class="lead">
        Personas primero, procesos claros y excelencia t√©cnica. Buscamos soluciones √∫tiles, mantenibles y seguras.
      </p>
    </header>
    <div class="grid-cultura" role="region" aria-label="Cultura, metodolog√≠a y servicios">
      <!-- Intro -->


      <!-- Col 1 -->
      <section class="card how card-anim" aria-labelledby="how-title">
        <div class="card-head">
          <span class="mini">Metodolog√≠a</span>
        </div>

        <ul class="list" aria-label="Metodolog√≠a de trabajo">
          <li><span aria-hidden="true">üß©</span> An√°lisis inicial y plan de implantaci√≥n a medida.</li>
          <li><span aria-hidden="true">üîÅ</span> Metodolog√≠a √°gil: entregas iterativas y feedback continuo.</li>
          <li><span aria-hidden="true">‚úÖ</span> Documentaci√≥n clara y traspaso sin fricci√≥n.</li>
        </ul>
      </section>

      <!-- Col 2 -->
      <section class="card pillars card-anim" aria-labelledby="pillars-title">
        <div class="card-head">
          <span class="mini">Cultura</span>

        </div>

        <ul class="list" aria-label="Pilares de cultura">
          <li><span aria-hidden="true">üß≠</span> Transparencia: decisiones trazables y comunicaci√≥n abierta.</li>
          <li><span aria-hidden="true">ü§ù</span> Colaboraci√≥n: equipos mixtos t√©cnicos/creativos con clientes.</li>
          <li><span aria-hidden="true">üìö</span> Aprendizaje continuo y revisi√≥n entre pares.</li>
        </ul>
      </section>

      <!-- Col 3 -->
      <section class="card quality card-anim" aria-labelledby="quality-title">
        <div class="card-head">
          <span class="mini">Garant√≠as</span>
        </div>

        <ul class="list" aria-label="Garant√≠as de calidad y seguridad">
          <li><span aria-hidden="true">üõ°Ô∏è</span> Seguridad por defecto (hardening, copias y controles RGPD).</li>
          <li><span aria-hidden="true">üß™</span> Validaci√≥n: pruebas, checklist y control de cambios.</li>
          <li><span aria-hidden="true">üìà</span> Monitorizaci√≥n y mejora continua orientada a resultados.</li>
        </ul>
      </section>

    </div>
  </div>

  <style>
    /* =========================
       SCOPE: solo #cultura
       ========================= */
    #cultura.sn-cultureBalanced.v6 {
      --color-primary: #00cfff;
      --color-accent: #00f2ff;
      --color-light: #eaf6ff;
      --color-text-muted: #cdefff;

      --glass-bg: rgba(255, 255, 255, .045);
      --glass-border: rgba(255, 255, 255, .10);
      --glass-shadow: 0 10px 26px rgba(0, 207, 255, .14);

      padding-block: clamp(56px, 8.5vh, 100px);
      padding-inline: 5vw;

      font-family: 'Segoe UI', sans-serif;
      color: var(--color-light);
      position: relative;
      overflow: hidden;
      isolation: auto;
    }

    /* Canvas FULL viewport */
    #cultura .sn-particles-canvas {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
      pointer-events: none;
      opacity: .9;
      mix-blend-mode: screen;
    }

    /* Contenido por encima */
    #cultura .sn-container {
      position: relative;
      z-index: 2;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Intro */
    #cultura .intro {
      text-align: center;
      margin-bottom: clamp(10px, 1.5vw, 16px);
    }

    #cultura .kicker {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-bottom: .85rem;
      padding: .55rem 1.05rem;
      border-radius: 999px;
      font-size: .98rem;
      font-weight: 850;
      color: var(--color-primary);
      background: rgba(0, 207, 255, .10);
      border: 1px solid rgba(0, 207, 255, .22);
      letter-spacing: .2px;
    }

    #cultura .sn-h2 {
      color: var(--color-primary) !important;
      font-weight: 900;
      font-size: clamp(2.15rem, 3.35vw, 2.85rem);
      margin: 0 0 .5rem;
      text-align: center;
    }

    #cultura .lead {
      max-width: 74ch;
      margin: 0 auto;
      color: var(--color-text-muted);
      opacity: .92;
      line-height: 1.65;
      font-size: 1.12rem;
      text-align: center;
    }

    /* Grid */
    #cultura .grid-cultura {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      grid-template-areas:
        "intro intro intro"
        "how   pillars quality"
        "services services services";
      gap: clamp(14px, 2vw, 22px);
      align-items: stretch;
    }

    #cultura .how {
      grid-area: how;
    }

    #cultura .pillars {
      grid-area: pillars;
    }

    #cultura .quality {
      grid-area: quality;
    }

    /* Cards base */
    #cultura .card {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: 18px;
      box-shadow: var(--glass-shadow);
      padding: 1.25rem 1.35rem;
      backdrop-filter: blur(0px);
      -webkit-backdrop-filter: blur(0px);
      transition: transform .25s ease, box-shadow .25s ease, background .25s ease, border-color .25s ease;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    /* Cabecera de card (mini + t√≠tulo) */
    #cultura .card-head {
      display: grid;
      gap: .2rem;
      margin-bottom: .35rem;
    }

    #cultura .mini {
      font-size: .9rem;
      font-weight: 850;
      color: rgba(234, 246, 255, .82);
      letter-spacing: .16px;
      text-transform: uppercase;
    }

    #cultura .sn-h3 {
      color: var(--color-primary);
      font-weight: 900;
      font-size: 1.22rem;
      margin: 0;
    }

    /* List */
    #cultura .list {
      list-style: none;
      padding: 0;
      margin: .7rem 0 0;
      display: grid;
      gap: .7rem;
    }

    #cultura .list li {
      display: grid;
      grid-template-columns: 1.55rem 1fr;
      gap: .65rem;
      align-items: start;
      color: var(--color-text-muted);
      line-height: 1.55;
      font-size: 1.02rem;
    }

    /* Servicios chips */
    #cultura .services-chips {
      grid-area: services;
      text-align: center;
      margin-top: clamp(4px, 1vw, 10px);
      padding-top: clamp(2px, .8vw, 6px);
    }

    #cultura .services-chips .sn-h3 {
      margin-bottom: .75rem;
      font-size: 1.2rem;
    }

    #cultura .chip-row {
      display: flex;
      gap: .7rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    #cultura .chip {
      display: inline-flex;
      align-items: center;
      gap: .55rem;
      padding: .7rem 1rem;
      border-radius: 999px;
      background: rgba(255, 255, 255, .06);
      border: 1px solid rgba(255, 255, 255, .14);
      color: rgba(234, 246, 255, .92);
      box-shadow: 0 12px 26px rgba(0, 207, 255, .10);
      font-weight: 800;
      text-decoration: none;
      transition: transform .18s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease;
    }

    #cultura .chip span[aria-hidden="true"] {
      width: 1.45rem;
      display: inline-flex;
      justify-content: center;
      flex: 0 0 1.45rem;
    }

    #cultura .chip:hover {
      transform: translateY(-1px);
      background: rgba(0, 207, 255, .10);
      border-color: rgba(0, 207, 255, .26);
      box-shadow: 0 16px 34px rgba(0, 207, 255, .14);
    }

    #cultura .chip--ghost {
      background: rgba(255, 255, 255, .04);
      border-color: rgba(255, 255, 255, .12);
      opacity: .95;
    }

    /* Animaci√≥n cards */
    #cultura .card-anim {
      will-change: transform, box-shadow;
      animation: snFadeInUp .45s ease both, snFloatCard 6.5s ease-in-out .45s infinite alternate;
    }

    @keyframes snFadeInUp {
      0% {
        opacity: 0;
        transform: translateY(18px);
      }

      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes snFloatCard {
      0% {
        transform: translateY(0);
      }

      100% {
        transform: translateY(-8px);
      }
    }

    /* Responsive */
    @media (max-width: 1024px) {
      #cultura .grid-cultura {
        grid-template-columns: 1fr 1fr;
        grid-template-areas:
          "intro intro"
          "how pillars"
          "quality quality"
          "services services";
      }
    }

    @media (max-width: 680px) {
      #cultura .grid-cultura {
        grid-template-columns: 1fr;
        grid-template-areas:
          "intro"
          "how"
          "pillars"
          "quality"
          "services";
      }
    }

    @media (prefers-reduced-motion: reduce) {
      #cultura .sn-particles-canvas {
        display: none !important;
      }

      #cultura .card-anim {
        animation: none !important;
      }

      #cultura .card,
      #cultura .chip {
        transition: none !important;
      }
    }
  </style>


  <script>
    (function () {
      const canvas = document.getElementById('culturaParticles');
      if (!canvas) return;

      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) return;

      const ctx = canvas.getContext('2d', { alpha: true });
      let w = 0, h = 0, dpr = 1;
      let particles = [];
      let rafId = null;
      let t = 0;

      const CFG = {
        density: 0.00018,
        minR: 1.2,
        maxR: 3.2,
        minV: 0.12,
        maxV: 0.40,
        linkDist: 130,
        linkAlpha: 0.16,
        glow: 14,
        drift: 0.02
      };

      const rand = (min, max) => Math.random() * (max - min) + min;

      function resize() {
        dpr = Math.min(window.devicePixelRatio || 1, 2);
        w = Math.max(320, Math.floor(window.innerWidth));
        h = Math.max(240, Math.floor(window.innerHeight));

        canvas.width = Math.floor(w * dpr);
        canvas.height = Math.floor(h * dpr);
        canvas.style.width = w + 'px';
        canvas.style.height = h + 'px';
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

        const target = Math.round(w * h * CFG.density);
        if (!particles.length) {
          particles = Array.from({ length: target }, () => makeParticle(true));
        } else {
          if (target > particles.length) {
            for (let i = 0; i < target - particles.length; i++) particles.push(makeParticle(true));
          } else if (target < particles.length) {
            particles.length = target;
          }
        }
      }

      function makeParticle(randomPos) {
        const a = rand(0, Math.PI * 2);
        const s = rand(CFG.minV, CFG.maxV);
        return {
          x: randomPos ? rand(0, w) : w / 2,
          y: randomPos ? rand(0, h) : h / 2,
          vx: Math.cos(a) * s,
          vy: Math.sin(a) * s,
          r: rand(CFG.minR, CFG.maxR),
          a: rand(0.35, 0.85),
          wobble: rand(0, 6.28)
        };
      }

      function step() {
        t += 0.01;
        ctx.clearRect(0, 0, w, h);

        const g = ctx.createRadialGradient(w * 0.5, h * 0.35, 10, w * 0.5, h * 0.35, Math.max(w, h));
        g.addColorStop(0, 'rgba(0,242,255,0.12)');
        g.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.fillStyle = g;
        ctx.fillRect(0, 0, w, h);

        for (const p of particles) {
          const wobX = Math.sin(t + p.wobble) * CFG.drift;
          const wobY = Math.cos(t + p.wobble) * CFG.drift;

          p.x += p.vx + wobX;
          p.y += p.vy + wobY;

          if (p.x < -10) p.x = w + 10;
          if (p.x > w + 10) p.x = -10;
          if (p.y < -10) p.y = h + 10;
          if (p.y > h + 10) p.y = -10;
        }

        if (CFG.linkDist > 0) {
          ctx.save();
          ctx.lineWidth = 1;
          for (let i = 0; i < particles.length; i++) {
            for (let j = i + 1; j < particles.length; j++) {
              const a = particles[i], b = particles[j];
              const dx = a.x - b.x, dy = a.y - b.y;
              const dist = Math.hypot(dx, dy);
              if (dist < CFG.linkDist) {
                const alpha = (1 - dist / CFG.linkDist) * CFG.linkAlpha;
                ctx.strokeStyle = `rgba(0,242,255,${alpha})`;
                ctx.beginPath();
                ctx.moveTo(a.x, a.y);
                ctx.lineTo(b.x, b.y);
                ctx.stroke();
              }
            }
          }
          ctx.restore();
        }

        ctx.save();
        ctx.shadowColor = 'rgba(0,242,255,0.65)';
        ctx.shadowBlur = CFG.glow;

        for (const p of particles) {
          ctx.fillStyle = `rgba(0,242,255,${p.a})`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
          ctx.fill();
        }
        ctx.restore();

        rafId = requestAnimationFrame(step);
      }

      let resizeTimer;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(resize, 150);
      });

      resize();
      step();

      window.addEventListener('beforeunload', () => cancelAnimationFrame(rafId));
    })();
  </script>
</section>